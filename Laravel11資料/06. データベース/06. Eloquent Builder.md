ドキュメント：[本家サイト](https://laravel.com/docs/11.x/eloquent#retrieving-models) [日本語](https://readouble.com/laravel/11.x/ja/eloquent.html#retrieving-models)

## Eloquent Builder
Laravel の Eloquent モデルは、ORM（Object Relational Mapping）機能を提供し、データベースをあたかもオブジェクトかの如く扱えるようにしてくれます。

## コマンドでのモデルファイルの作成

```bash
php artisan make:model Post
php artisan make:model Post -mf   # マイグレーション、Factory ファイルも一緒に
```

## テーブル名とモデル名
モデル名は単数形でアッパーキャメルケース、テーブル名は複数系でスネークケースが、Laravel で名前規則のルールになります。

| モデル名         | DB のテーブル名       |
| ------------ | --------------- |
| Post         | posts           |
| PostCategory | post_categories |

## データの取得
データベースからデータを取得する際は、Query Builder で見た where などのメソッドがそのまま使えます。Eloquent Builder のみで使えるメソッドも幾つかあります。

複数のデータを取得するメソッド（`get` 等）で取得したデータは、対象のモデルの Eloquent コレクション型（`Illuminate\Database\Eloquent\Collection`）で返されます。1つのデータを取得するメソッド（`find` 等）の場合は、対象のモデル型（例：`Models/User`）で返されます（該当データが無い場合は、null）。

```php
$users = User::get();
$users = User::where('id', '>', 5)->get();

dd($users);
```

教育用教材では、::all() もよく登場しますが、こちらは「全件」のデータを取得する場合に使用します。条件指定やソートができないので、実際はあまり使われません。
```php
$users = User::get();
$users = User::all(); // 上記と等価

$users = User::where('id', '>', 5)->all(); // エラーになる
```

### Query Builder にはないが、Eloquent Builder では使えるメソッド
```php
User::findOrFail(1); // 該当連番のデータを返す。データが見つからない場合、Not Found 画面を表示
User::firstOrFail(); // 最初のデータを返す。データが見つからない場合、同上
```
