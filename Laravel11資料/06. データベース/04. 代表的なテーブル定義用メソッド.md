ドキュメント：[本家サイト](https://laravel.com/docs/11.x/migrations) [日本語](https://readouble.com/laravel/11.x/ja/migrations.html)

以下、代表的なテーブル定義用メソッドです。全てをここで覚える必要はありません。取りあえずザッと見てみましょう。

```php
$table->xxx('コラム名'); の形で書きますが、$table は省略して記載します。

// 自動連番
id();      // プライマリキー（主キー）となる。コラム名の指定は不要。（unsignedBigInteger で定義される）

// 数値系
tinyInteger('column');    // MySQL の場合、-128 ～ 127
smallInteger('column');
mediumInteger('column');
integer('column');
bigInteger('column');

// マイナスが不要な場合
unsignedTinyInteger('column');    // MySQL の場合、0 ～ 255
unsignedSmallInteger('column');
unsignedMediumInteger('column');
unsignedInteger('column');
unsignedBigInteger('column');

// 参考
https://dev.mysql.com/doc/refman/8.0/ja/integer-types.html

// 文字列系
string('column');   // 短めな文字列向け。VARCHAR型。第2引数で文字数を指定可能。デフォルト255
text('column');     // ブログ本文などの長めの文章向け
longText('column'); // 大量の文字数があるブログなどはこれ

// その他
boolean('column');  // 真偽値（MySQLでは、TINYINT 型として作られる）
date('column');     // 日付
dateTime('column'); // 日付時刻
float('column');    // ver.11 から呼び出し方が変わった 単精度浮動小数点型
timestamps();       // 'created_at' と 'updated_at' の名前の TIMESTAMP 項目を作る
uuid('column');
ulid('column');

// インデックスや制約等を追加する際に使用するもの
index('column');      // インデックスの生成。配列を渡して複合インデックスを作成できる
unique();             // ユニーク制約
nullable();           // null を許可
default(デフォルト値); // デフォルト値の設定
comment(コメント);     // コメントを付与する
unsigned();           // integer 系の型で、UNSIGNED（マイナス不要） にする
after('column');      // 指定のコラムの後に配置（MySQLで有効）
before('column');     // 上記の逆

// 変更系
dropColumn('column'); // コラム名の削除
renameColumn('変更前コラム名', '変更後コラム名'); // 古いシステムの場合は、doctrine/dbal が必要
```

#### change() メソッドを使った項目の変更
項目の型を変更したり修飾子を付ける場合は、`change()` メソッドが利用できます。Laravel 11 以降、`change()` メソッドを利用する際は、既に定義済みの修飾子等も含めて定義するようにします。（そうでないとその修飾子はカットされてしまいます）

例：
```php
Schema::create('posts', function (Blueprint $table) {
    $table->unsignedSmallInteger('status')->default(0);
});
```

上記に `status` に対して、コメントを追加する場合

```php
Schema::table('posts', function (Blueprint $table) {
    $table->unsignedSmallInteger('status')
        ->default(0)
        ->comment('コメント追加')
        ->change();
});
```

元からあった `->default(0)` も忘れず含めるようにします。

## 外部キー

### 外部キーの定義
Laravel では、幾つかの書き方がありますが、ここではオーソドックスな方法を紹介させていただきます。

```php
$table->foreignId('user_id');
又は
$table->foreignIdFor(User::class);   // 名前空間（App\Models\User）をインポートの事。
```

### 制約の追加
データの整合性を保証するための制約を付けることができます。

```php
// 制約の追加
$table->foreignId('user_id')->constrained();

// 更に CASCADE オプションの追加
$table->foreignId('user_id')
    ->constrained()
    ->onUpdate('cascade')
    ->onDelete('cascade');
```
