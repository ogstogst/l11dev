ドキュメント：[本家サイト](https://laravel.com/docs/11.x/eloquent#events) [日本語](https://readouble.com/laravel/11.x/ja/eloquent.html#events)

モデルデータの取得、作成、更新、保存、削除などの処理を行う際にイベントが発生します。以下のイベントポイントがあります。
`retrieved`, `creating`, `created`, `updating`, `updated`, `saving`, `saved`, `deleting`, `deleted`, `trashed`, `forceDeleting`, `forceDeleted`, `restoring`, `restored`, and `replicating`.
（`creating` は、モデルが作成される直前、`created` は、モデルが作成された直後、と言う感じになります）

イベントが発生した際に、何かの処理を実行させる事が可能です。その処理の作成方法には、(1)クラス、(2)無名関数 を使う2通りがあります。ここでは、無名関数を使う方法で説明させていただきます。

Models/User.php
```php
class User extends Authenticatable
{
    protected static function booted()
    {
        static::deleting(function ($user) {
            // 削除する前に必要な処理などを記載する
            dump('deleting');

            // return false; すると削除されない
            return false;
        });
    }
}
```

web.php
```php
Route::get('', function (Request $request) {
    $user = User::first();
    $user->delete();
});
```

1つの使い所としては、例えばユーザーが削除されると、そのユーザーが所有するブログ投稿とブログ画像も一緒に削除されるようにする等。
（DB の制約を使えば、関連する DB のデータを同時に削除することは出来るが、画像などはできない為）

## 注意事項
モデルを取得しないで、直接 SQL のみで操作する書き方では、イベントは発生しません。
（モデルを取得しないので、イベントを発生させようがない）

```php
// イベントは発生しない
User::where('id', 3)->delete();

// 少しややこしいが、下記の場合は内部でモデルを取得しており、イベントは発生する
User::destroy(1);
```

また、イベントの記述は、本体コードと離れた場所にある為、一連の処理の流れが分かりにくくなる恐れあるので濫用に注意。