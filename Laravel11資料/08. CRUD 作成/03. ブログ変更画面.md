ブログの変更画面は、そのブログを所有するユーザーのみが、該当変更画面を開ける必要があります。言い替えると、他人のブログ投稿の変更画面を開けてはまずいです。ですのでそれを防止する為に、ここで認可機能のポリシーを使って行きます。
まずその前に、一覧画面で変更画面へのリンクを作成しましょう。以下のように一覧画面を変更します。

views/member/posts/index.blade.php
```html
<x-layouts.member>

    <a href="{{ route('member.posts.create') }}">新規作成</a>

    <table>
        <thead>
          <tr>
            <th style="text-align:center">タイトル</th>
            <th style="text-align:center">変更</th>
          </tr>
        </thead>
        <tbody>

    @foreach($posts as $post)
        <tr>
            <td>{{ $post->title }}</td>
            <td style="text-align:center"><a href="{{ route('member.posts.edit', $post) }}">変更</a></td>
        </tr>
    @endforeach

        </tbody>
      </table>

</x-layouts.member>
```

では、変更画面を表示する為の PostManageController を編集して行きます。まず初期状態を確認しましょう。

```php
    public function edit(Post $post)
    {
        //
    }
```

ここではモデル結合が利用できるように書かれていますので、自動で変更対象となる Post モデルを取得できます。この Post モデルのデータを変更画面ではテキストボックスなどに復元しなければなりません。ですので、この `$post` のデータを view に渡す必要があるのですが、もし変更処理をした際に、エラーがあって元の変更画面に戻ってきた場合は、その時入力していたデータでデータを復元する必要があります。
これに対応する為に、old() ヘルパ関数で直前に入力していたデータが取得できる場合は、そのデータを使い、そうで無い場合は、モデルのデータで復元するという処理をします。以下のように書けます。

```php
    public function edit(Post $post)
    {
        $data = old() ?: $post;

        return view('member.posts.edit', compact('post', 'data'));
    }
```

では、変更用の view を以下のように作成します。

views/member/posts/edit.blade.php
```html
<x-layouts.member>

  <form method="post" action="{{ route('member.posts.update', $post) }}">
    @csrf
    @method('PUT')

    <x-error />
    <x-status />

    <p>
        <label>タイトル</label>
        <input type="text" name="title" style="width:400px" value="{{ data_get($data, 'title') }}">
    </p>

    <p>
        <label>本文</label>
        <textarea name="body" style="width:600px; height:200px;">{{ data_get($data, 'body') }}</textarea>
    </p>

    <input type="submit" value="変更する">

  </form>

</x-layouts.member>
```

登録画面と比べて異なる箇所は、
- `form action=""` の URL 箇所
- `@method('PUT')` の追加
- テキストボックスのデフォルトの `value` 設定
- 「変更する」ボタンの文字
となります。

`@method('PUT')` は、リソースコントローラの規則に従う為、この記述が必要になります。
`data_get` 関数は、第1引数に指定した配列又はオブジェクトから、第2引数に指定したキーを取得するというヘルパー関数です。
[data_get](https://readouble.com/laravel/10.x/ja/helpers.html#method-data-get)

今回は、登録画面と変更画面でそれぞれ別々の 2 つの view を用意しました。ただ、共通する内容が多いのも事実です。やり方としては、
- 1つの view で必要に応じて if 文で条件に応じて出力を変えて対応する
- 別々の view で対応する（今回の方法）
- 別々の view で対応しつつも、共通する部分は別ファイル化して include して対応する

など考えられます。